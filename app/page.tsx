\'\'\'use client\';\'\'\'\n\nimport { useState } from \'react\';\nimport styles from \'./page.module.css\';\n\n// Nueva interfaz para los datos de beneficiarios\ninterface Beneficiario {\n  id: number;\n  nombre_completo: string;\n  cedula: string;\n  condicion: string;\n  nombre_finado: string | null;\n}\n\nexport default function Home() {\n  const [beneficiarios, setBeneficiarios] = useState<Beneficiario[]>([]);\n  const [isLoading, setIsLoading] = useState(false);\n  const [error, setError] = useState<string | null>(null);\n\n  const handleTestDb = async () => {\n    setIsLoading(true);\n    setError(null);\n    setBeneficiarios([]);\n\n    try {\n      const response = await fetch(\'/api/test-db\');\n      if (!response.ok) {\n        const errorData = await response.json();\n        throw new Error(errorData.error || \'Something went wrong\');\n      }\n      const data = await response.json();\n      setBeneficiarios(data.rows);\n    } catch (err) {\n      setError(err instanceof Error ? err.message : \'An unknown error occurred\');\n    } finally {\n      setIsLoading(false);\n    }\n  };\n\n  return (\n    <main className={styles.main}>\n      <div className={styles.description}>\n        <h1>Prueba de Base de Datos con Vercel Postgres</h1>\n        <p>\n          Haz clic en el botón para crear/conectar a la tabla <strong>Beneficiarios</strong>, insertar dos registros de ejemplo y mostrar los resultados.\n        </p>\n        <p>\n          (Asegúrate de haber creado el archivo <code>.env.local</code> con las credenciales de tu base de datos).\n        </p>\n      </div>\n\n      <div className={styles.center}>\n        <button onClick={handleTestDb} disabled={isLoading} style={{ padding: \'10px 20px\', fontSize: \'16px\' }}>\n          {isLoading ? \'Probando...\' : \'Probar Conexión y Cargar Datos\'}\n        </button>\n      </div>\n\n      {error && (\n        <div style={{ marginTop: \'20px\', color: \'red\', width: \'100%\', maxWidth: \'800px\' }}>\n          <h2>Error</h2>\n          <pre style={{ whiteSpace: \'pre-wrap\', wordBreak: \'break-all\' }}>{error}</pre>\n          <p>\n            <strong>Posibles causas:</strong>\n          </p>\n          <ul>\n            <li>El archivo <code>.env.local</code> no existe o está mal configurado.</li>\n            <li>Las credenciales de la base de datos son incorrectas.</li>\n            <li>Hay un problema de red con la base de datos de Vercel.</li>\n          </ul>\n        </div>\n      )}\n\n      {beneficiarios.length > 0 && (\n        <div style={{ marginTop: \'40px\', width: \'100%\', maxWidth: \'800px\' }}>\n          <h2>Resultados de la Tabla \"Beneficiarios\":</h2>\n          <table style={{ width: \'100%\', borderCollapse: \'collapse\', marginTop: \'10px\' }}>\n            <thead>\n              <tr style={{ background: \'#eee\' }}>\n                <th style={{ border: \'1px solid #ddd\', padding: \'8px\' }}>ID</th>\n                <th style={{ border: \'1px solid #ddd\', padding: \'8px\' }}>Nombre Completo</th>\n                <th style={{ border: \'1px solid #ddd\', padding: \'8px\' }}>Cédula</th>\n                <th style={{ border: \'1px solid #ddd\', padding: \'8px\' }}>Condición</th>\n                <th style={{ border: \'1px solid #ddd\', padding: \'8px\' }}>Nombre Finado</th>\n              </tr>\n            </thead>\n            <tbody>\n              {beneficiarios.map((b) => (\n                <tr key={b.id}>\n                  <td style={{ border: \'1px solid #ddd\', padding: \'8px\' }}>{b.id}</td>\n                  <td style={{ border: \'1px solid #ddd\', padding: \'8px\' }}>{b.nombre_completo}</td>\n                  <td style={{ border: \'1px solid #ddd\', padding: \'8px\' }}>{b.cedula}</td>\n                  <td style={{ border: \'1px solid #ddd\´, padding: \'8px\' }}>{b.condicion}</td>\n                  <td style={{ border: \'1px solid #ddd\', padding: \'8px\' }}>{b.nombre_finado || \'N/A\'}</td>\n                </tr>\n              ))}\n            </tbody>\n          </table>\n        </div>\n      )}\n    </main>\n  );\n}\n
